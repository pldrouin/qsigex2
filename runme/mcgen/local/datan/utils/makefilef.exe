.SUFFIXES:
.SUFFIXES: .f .o .a
FC        = g77
FFLAGS    = -O
#LIBS      = -ldatan
LIBS      = ../../lib/libdatsrc.a ../../lib/libgrsrc.a

vpath %.f .:../exasrc:../solsrc

%.o: %.f
	$(FC) -c $(FFLAGS) $<

%: %.o
	$(FC) $@.o $(LIBS) -L/usr/X11R6/lib -lXm -lXmu -lXt -lX11 \
         -lm -lc -lrt -o $@

%: %.f
	$(FC) -c $(FFLAGS) $<
	$(FC) $@.o $(LIBS) -L/usr/X11R6/lib -lXm -lXmu -lXt -lX11 \
         -lm -lc -lrt -o $@

EXAPRG1 =   e1av e1ds e1gam e1gr e1lsq e1min
EXAPRG2 =   e1ml e1mtx e1reg e1rn e1sd e1sm
EXAPRG3 =   e1test e1tim e2av e2ds e2gam e2gr
EXAPRG4 =   e2lsq e2min e2ml e2mtx e2reg e2rn
EXAPRG5 =   e2sd e2sm e2test e2tim e3ds e3gam
EXAPRG6 =   e3gr e3lsq e3min e3mtx e3reg e3rn
EXAPRG7 =   e3sm e3test e4gr e4lsq e4min e4mtx
EXAPRG8 =   e4reg e4rn e4sm e5gr e5lsq e5mtx
EXAPRG9 =   e5rn e5sm e6gr e6lsq e6mtx e6sm
EXAPRGA =   e7gr e7lsq e7mtx e7sm e8gr e8lsq
EXAPRGB =   e8mtx e9mtx e10mtx
SOLPRG1 =   s1av s1ds s1gam s1lsq s1min s1ml
SOLPRG2 =   s1reg s1rn s1sd s1tim s2av s2ds
SOLPRG3 =   s2gam s2lsq s2min s2ml s2reg s2rn
SOLPRG4 =   s2sd s2tim s3lsq s3min s3rn s4lsq
SOLPRG5 =   s4min s4rn s5lsq s6lsq s7lsq

PROGRAMS =  $(EXAPRG1) $(EXAPRG2) $(EXAPRG3) $(EXAPRG4) $(EXAPRG5) \
	    $(EXAPRG6) $(EXAPRG7) $(EXAPRG8) $(EXAPRG9) $(EXAPRGA) \
	    $(EXAPRGB) \
	    $(SOLPRG1) $(SOLPRG2) $(SOLPRG3) $(SOLPRG4) $(SOLPRG5)

.PHONY: all usage

clean:
	rm -f $(PROGRAMS)
	cd ../exasrc ; rm -f $(PROGRAMS) ; cd ../utils
	cd ../solsrc ; rm -f $(PROGRAMS) ; cd ../utils
	rm -f *.o

usage:
	@echo Choose, e.g., one of
	@echo $(EXAPRG1)
	@echo $(EXAPRG2)
	@echo $(EXAPRG3)
	@echo $(EXAPRG4)
	@echo $(EXAPRG5)
	@echo $(EXAPRG6)
	@echo $(EXAPRG7)
	@echo $(EXAPRG8)
	@echo $(EXAPRG9)
	@echo $(EXAPRGA)
	@echo $(EXAPRGB)
	@echo $(SOLPRG1)
	@echo $(SOLPRG2)
	@echo $(SOLPRG3)
	@echo $(SOLPRG4)
	@echo $(SOLPRG5)

all: $(PROGRAMS)

$(PROGRAMS):
